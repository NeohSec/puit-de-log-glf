#!/bin/bash
clear
# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m' # No Color

# ASCII Header
display_header() {
    clear
    echo -e "${CYAN}"
    echo "‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïó      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó "
    echo "‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù    ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù "
    echo "‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë       ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó      ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ñà‚ïó"
    echo "‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë       ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù      ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë"
    echo "‚ñà‚ñà‚ïë     ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù"
    echo "‚ïö‚ïê‚ïù      ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù       ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù "
    echo ""
    echo "      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó "
    echo "     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó"
    echo "     ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë"
    echo "     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë"
    echo "     ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë"
    echo "      ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù"
    echo ""
    echo "‚ñà‚ñà‚ïó      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó"
    echo "‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù"
    echo "‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   "
    echo "‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   "
    echo "‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   "
    echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù    ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù   "
    echo ""
    echo -e "${WHITE}            üíª Setup automatis√© pour puit de logs üíª"
    echo -e "                              ${PURPLE}By NEOH${NC}"
    echo ""
}

# Print functions
print_step() {
    echo -e "${BLUE}[√âTAPE]${NC} $1"
}

print_info() {
    echo -e "${CYAN}[INFO]${NC} $1"
}

print_success() {
    echo -e "${GREEN}[‚úì]${NC} $1"
}

print_error() {
    echo -e "${RED}[‚úó]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[‚ö†]${NC} $1"
}

# Check if running as root
check_root() {
    print_step "V√©rification des privil√®ges administrateur..."
    
    if [[ $EUID -ne 0 ]]; then
        print_error "Ce script doit √™tre ex√©cut√© avec des privil√®ges root !"
        print_info "Utilisez : sudo ./setup.sh"
        exit 1
    fi
    
    print_success "Privil√®ges administrateur confirm√©s !"
    echo ""
}

# Check if we're in the right directory and docker-compose exists
check_directory() {
    print_step "V√©rification de l'environnement..."
    
    # Check if docker-compose.yml exists
    if [ ! -f "docker-compose.yml" ]; then
        print_error "Fichier docker-compose.yml non trouv√© !"
        print_info "Assurez-vous d'√™tre dans le bon r√©pertoire du projet."
        exit 1
    fi
    
    print_success "Fichier docker-compose.yml trouv√© !"
    
    # Display current directory for confirmation
    current_dir=$(basename "$PWD")
    print_info "R√©pertoire actuel : $current_dir"
    echo ""
}

# Check and install Docker if needed
check_docker() {
    print_step "V√©rification de Docker..."
    
    # Check if Docker is installed
    if ! command -v docker &> /dev/null; then
        print_warning "Docker n'est pas install√©. Installation en cours..."
        
        # Update package list
        print_info "Mise √† jour des paquets..."
        apt-get update
        
        # Install curl if not present
        print_info "Installation de curl..."
        apt-get install -y curl
        
        print_info "Lancement du script d'installation Docker..."
        
        # Execute Docker installation script and wait for completion
        curl -s https://raw.githubusercontent.com/s4dic/dockerautoinstall/main/dockerautoinstall.sh | bash
        
        # Check if installation was successful
        if [ $? -eq 0 ]; then
            print_success "Script d'installation Docker ex√©cut√© !"
            
            # Wait a bit for Docker to be ready
            sleep 3
            
            # Verify Docker installation
            if command -v docker &> /dev/null; then
                print_success "Docker install√© avec succ√®s !"
                
                # Start Docker service if not running
                systemctl start docker 2>/dev/null || service docker start 2>/dev/null
                systemctl enable docker 2>/dev/null || true
                
            else
                print_error "Erreur : Docker n'a pas pu √™tre install√© correctement !"
                print_info "V√©rifiez manuellement l'installation de Docker."
                exit 1
            fi
        else
            print_error "Erreur lors de l'ex√©cution du script d'installation Docker !"
            exit 1
        fi
    else
        print_success "Docker est d√©j√† install√© !"
    fi                
    
    print_success "Environnement Docker pr√™t !"
    echo ""
}

# Create necessary directories
create_directories() {
    print_step "Cr√©ation de la structure des dossiers..."
    echo ""
    
    # List of directories to create
    directories=(
        "reverseproxy/certs"
        "DATA/grafana"
        "DATA/loki"
    )
    
    for dir in "${directories[@]}"; do
        if [ ! -d "$dir" ]; then
            print_info "Cr√©ation du dossier : $dir"
            mkdir -p "$dir"
            
            if [ $? -eq 0 ]; then
                print_success "Dossier cr√©√© : $dir"
            else
                print_error "Erreur lors de la cr√©ation du dossier : $dir"
                exit 1
            fi
        else
            print_info "Dossier existant : $dir ‚úì"
        fi
    done
    
    echo ""
    print_success "Structure des dossiers cr√©√©e avec succ√®s !"
    echo ""
}

# Set correct permissions for Docker volumes
set_permissions() {
    print_step "Configuration des permissions des dossiers..."
    
    # Set permissions for Grafana (ID 472)
    print_info "Configuration des permissions pour Grafana..."
    chown -R 472:472 DATA/grafana/
    chmod -R 755 DATA/grafana/
    
    # Set permissions for Loki (ID 10001)
    print_info "Configuration des permissions pour Loki..."
    chown -R 10001:10001 DATA/loki/
    chmod -R 755 DATA/loki/
    
    # Set permissions for reverse proxy certs
    print_info "Configuration des permissions pour les certificats..."
    chown -R root:root reverseproxy/certs/
    chmod -R 644 reverseproxy/certs/
    
    print_success "Permissions configur√©es avec succ√®s !"
    echo ""
}

# Launch Docker containers
launch_containers() {
    print_step "Lancement des containers Docker..."
    
    if [ -f "docker-compose.yml" ]; then
        print_info "Arr√™t des containers existants..."
        docker-compose down 2>/dev/null
        
        print_info "D√©marrage des services..."
        if docker-compose up -d; then
            sleep 2
            
            print_info "V√©rification du statut des containers..."
            docker-compose ps
            
            print_success "Tous les services sont d√©marr√©s avec succ√®s !"
        else
            print_error "Erreur lors du lancement des containers !"
            print_info "V√©rifiez les logs avec : docker-compose logs"
            exit 1
        fi
    else
        print_error "Fichier docker-compose.yml non trouv√© !"
        exit 1
    fi
    echo ""
}

# Display final message and next steps
display_final_message() {
    echo -e "${GREEN}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë                      ${WHITE}üéâ INSTALLATION TERMIN√âE AVEC SUCC√àS ! üéâ${GREEN}                 ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë    Votre puit de log GLF (Grafana + Loki + Fluent-bit) est maintenant          ‚ïë"
    echo -e "‚ïë    op√©rationnel et accessible !                                                ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ${YELLOW}üìã PROCHAINES √âTAPES :${GREEN}                                                        ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ${WHITE}1.${GREEN} Modifiez le fichier ${CYAN}reverseproxy/nginx.conf${GREEN}                                ‚ïë"
    echo -e "‚ïë     pour l'adapter √† votre configuration                                       ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ${WHITE}2.${GREEN} Red√©marrez si n√©cessaire : ${CYAN}docker-compose restart${GREEN}                          ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ${WHITE}3.${GREEN} Consultez les logs : ${CYAN}docker-compose logs -f${GREEN}                                ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ${YELLOW}üåê ACC√àS AUX SERVICES :${GREEN}                                                       ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ‚Ä¢ Grafana : ${CYAN}http://localhost:3000${GREEN} (admin/admin)                               ‚ïë"
    echo -e "‚ïë  ‚Ä¢ Loki API : ${CYAN}http://localhost:3100${GREEN}                                            ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ${YELLOW}üîß COMMANDES UTILES :${GREEN}                                                         ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë  ‚Ä¢ Arr√™ter : ${CYAN}docker-compose down${GREEN}                                               ‚ïë"
    echo -e "‚ïë  ‚Ä¢ Red√©marrer : ${CYAN}docker-compose restart${GREEN}                                         ‚ïë"
    echo -e "‚ïë  ‚Ä¢ Voir les logs : ${CYAN}docker-compose logs -f [service]${GREEN}                            ‚ïë"
    echo -e "‚ïë                                                                                ‚ïë"
    echo -e "‚ïë                              ${PURPLE}Cr√©√© par : NEOH${GREEN}                                   ‚ïë"
    echo -e "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${NC}"
    echo ""
}

# Main execution
main() {
    display_header

    sleep 3  

    print_info "D√©marrage de l'installation du Puit de Log GLF (Grafana + Loki + Fluent-bit)"
    echo ""
    
    check_root
    check_directory
    check_docker
    create_directories
    set_permissions
    launch_containers
    
    echo ""
    display_final_message
}

# Run main function
main "$@"
